<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹•è©è¾æ›¸ãƒ“ãƒ¥ãƒ¼ã‚¢</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ³ãƒˆã¨åŸºæœ¬è¨­å®š */
        body {
            font-family: 'Hiragino Sans', 'Meiryo', 'Yu Gothic', sans-serif;
            color: #000;
            line-height: 1.5; /* è¡Œé–“ã‚’ã‚ãšã‹ã«è©°ã‚ã‚‹ */
            background-color: #f7f7f7;
            min-height: 100vh;
        }
        
        /* è¾æ›¸ã‚«ãƒ¼ãƒ‰ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
        .verb-card {
            background-color: #fff;
            padding: 20px 25px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å°‘ã—æ¸›ã‚‰ã™ */
            margin-bottom: 20px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            border-radius: 8px;
            box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.08), 0 1px 3px -1px rgba(0, 0, 0, 0.04);
            /* 2åˆ—è¡¨ç¤ºã®ãŸã‚æœ€å¤§å¹…ã®åˆ¶é™ã‚’è§£é™¤ */
            max-width: none; 
            margin-left: 0;
            margin-right: 0;
        }

        /* 1. ãƒ˜ãƒƒãƒ€ãƒ¼ (å˜èª) */
        .card-header h3 {
            font-size: 2.0em; /* ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
            font-weight: 500;
            margin: 0 0 3px 0;
            display: inline-block;
            border-bottom: 2px solid #000;
            padding-bottom: 1px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’æ¸›ã‚‰ã™ */
        }
        /* æ´¾ç”Ÿæƒ…å ± (æ¥é ­è¾ + åŸºå¹¹) */
        .etymology {
            font-size: 1.0em; /* ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
            color: #007bff; 
            font-style: italic;
            margin-top: 3px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            font-weight: 500;
        }

        /* 2. æ„å‘³ */
        .meaning-jp {
            font-size: 1.3em; /* ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
            font-weight: 700;
            margin: 20px 0 3px 0; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            color: #333;
        }
        .meaning-en {
            font-style: italic;
            font-size: 0.95em; /* ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
            color: #666;
            margin-bottom: 20px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            padding-bottom: 8px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’æ¸›ã‚‰ã™ */
            border-bottom: 1px solid #eee;
        }

        /* 3. è©³ç´°æƒ…å ± */
        .detail-item {
            display: flex;
            margin-bottom: 4px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            align-items: baseline;
        }
        .detail-label {
            width: 80px; /* å›ºå®šå¹…ã‚’ç¸®å° */
            font-weight: normal;
            margin-right: 10px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            color: #333;
            flex-shrink: 0;
            font-size: 0.9em;
        }
        .detail-value {
            flex-grow: 1;
            font-size: 0.9em; /* ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
        }
        .german-term {
            font-family: 'Consolas', 'Courier New', monospace;
            font-style: italic;
            background-color: #fcfcfc;
            padding: 0 2px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’æ¸›ã‚‰ã™ */
            border-radius: 3px;
        }
        .highlight-detail {
            color: #007bff;
            font-weight: 500;
        }

        /* 4. ä¾‹æ–‡ */
        .example-section {
            margin-top: 20px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            padding-top: 10px;
            border-top: 1px dashed #ddd;
        }
        .example-box {
            display: flex;
            margin-bottom: 15px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            align-items: flex-start;
        }
        .vertical-line {
            border-left: 2px solid #007bff;
            height: auto;
            margin-right: 10px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            min-height: 2em; /* æœ€å°é«˜ã•ã‚’èª¿æ•´ */
            border-radius: 1px;
            flex-shrink: 0;
        }
        .example-content {
            flex-grow: 1;
        }
        .german-sentence {
            font-weight: normal;
            margin: 0;
            font-size: 1.0em;
        }
        .japanese-translation {
            font-size: 0.85em; /* ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
            color: #555;
            margin: 0;
            line-height: 1.2;
            font-style: italic;
        }

        /* 5. æ´¾ç”Ÿèª/é–¢é€£èª */
        .related-section {
            margin-top: 15px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            border-top: 1px solid #eee;
            padding-top: 10px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’æ¸›ã‚‰ã™ */
        }
        .related-item {
            display: flex;
            align-items: center;
            margin-bottom: 3px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’æ¸›ã‚‰ã™ */
            font-size: 0.9em; /* ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
        }
        .icon {
            font-size: 1.2em; /* ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
            color: #007bff;
            margin-right: 6px;
            line-height: 1;
        }

        /* ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆ - æ¨ªä¸¦ã³ã‚¹ã‚¿ã‚¤ãƒ«ã¯ç¶­æŒ */
        .filter-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;          
            flex-wrap: wrap;        
            gap: 5px;               
        }
        .filter-list li {
            padding: 0;
            margin: 0;
            display: inline-block;
        }
        .filter-list a {
            display: inline-block;
            padding: 3px 6px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’èª¿æ•´ */
            border-radius: 4px;
            color: #333;
            text-decoration: none;
            transition: background-color 0.2s;
            white-space: nowrap; 
            font-size: 0.9em; /* æ–‡å­—ã‚µã‚¤ã‚ºã‚’ã‚ãšã‹ã«å°ã•ã */
        }
        .filter-list a:hover {
            background-color: #eef;
        }
        .filter-list a.active {
            background-color: #007bff;
            color: white;
            font-weight: 700;
        }
        
        /* ã‚¹ãƒ©ãƒƒã‚·ãƒ¥åŒºåˆ‡ã‚Šã¨ã€Œå…¨ã¦ã€ã®ç‰¹æ®Šå¯¾å¿œ */
        .filter-list li:not(.all-item):not(:last-child)::after {
            content: "/";
            margin-left: 5px;
            margin-right: 5px;
            color: #ccc;
        }
        .all-item a {
            padding: 3px 8px;
            margin-right: 8px;
        }


        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        #main-content {
            min-height: 50vh;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 1024px) {
            .verb-card {
                padding: 20px;
            }
            .sidebar {
                border-right: none !important;
                border-bottom: 1px solid #ddd;
                padding-bottom: 20px;
            }
            /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆä»¥ä¸‹ã§ã¯1åˆ—ã‚’ç¶­æŒ */
            .grid-cols-4 {
                grid-template-columns: 1fr;
            }
        }
        
        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ - 2åˆ—è¡¨ç¤ºã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .verb-grid {
            display: grid;
            gap: 20px; /* ã‚«ãƒ¼ãƒ‰é–“ã®é–“éš”ã‚’èª¿æ•´ */
        }
        
        /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (lg) ä»¥ä¸Šã§2åˆ—è¡¨ç¤º */
        @media (min-width: 1024px) {
            .verb-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
    </style>
</head>
<body class="p-4 sm:p-6 lg:p-8">

    <header class="text-center mb-10">
        <h1 class="text-3xl font-bold text-gray-800">ãƒ‰ã‚¤ãƒ„èªå‹•è©è¾æ›¸</h1>
        <p class="text-gray-500 mt-2">æ¥é ­è¾ã¨åŸºå¹¹ã«åŸºã¥ã„ãŸãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ“ãƒ¥ãƒ¼ã‚¢</p>
    </header>

    <div id="app-container" class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        
        <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ (ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°) -->
        <aside class="sidebar lg:col-span-1 bg-white p-6 rounded-lg shadow-lg border-r border-gray-200">
            <h2 class="text-xl font-semibold mb-4 border-b pb-2 text-gray-700">ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</h2>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-2 text-gray-600">æ¥é ­è¾ (Prefix)</h3>
                <ul id="prefix-list" class="filter-list text-sm">
                    <!-- æ¥é ­è¾ãƒªã‚¹ãƒˆãŒã“ã“ã«æŒ¿å…¥ã•ã‚Œã¾ã™ -->
                </ul>
            </div>

            <div>
                <h3 class="text-lg font-medium mb-2 text-gray-600">åŸºå¹¹ (Stem)</h3>
                <ul id="stem-list" class="filter-list text-sm">
                    <!-- åŸºå¹¹ãƒªã‚¹ãƒˆãŒã“ã“ã«æŒ¿å…¥ã•ã‚Œã¾ã™ -->
                </ul>
            </div>
        </aside>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ (å˜èªè©³ç´°) -->
        <main id="main-content" class="lg:col-span-3">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">å˜èªä¸€è¦§ï¼ˆæ¥é ­è¾ï¼šå…¨ã¦ï¼‰</h2>
            <div id="prefix-description" class="mb-6 text-gray-600 text-sm italic"></div>
            <div id="verb-details" class="verb-grid">
                <p class="text-center text-gray-500 mt-10 col-span-full">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™...</p>
            </div>
        </main>
    </div>

    <script>
        // ----------------------------------------------------
        // JavaScript ãƒ­ã‚¸ãƒƒã‚¯ (ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã¨è¡¨ç¤º)
        // ----------------------------------------------------
        
        // **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹URL**: GitHubã®Rawãƒ•ã‚¡ã‚¤ãƒ«URLã‚’è¨­å®š
        const JSON_URL = 'https://raw.githubusercontent.com/SallyYamamoto/Prefix_German/refs/heads/main/verbs.json';
        let allData = []; // å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        // æ¥é ­è¾ã®æ„å‘³èª¬æ˜ãƒãƒƒãƒ—
        const prefixExplanations = {
            "be": "be- ã¯å‹•è©ã‚’ä»–å‹•è©åŒ–ã—ã€å¯¾è±¡ã¸ã®åƒãã‹ã‘ã‚’è¡¨ã™ã€‚ä¾‹: befragenï¼ˆè³ªå•ã™ã‚‹ï¼‰ã€bemalenï¼ˆå¡—ã‚‹ï¼‰ã€‚",
            "ent": "ent- ã¯ã€é›¢ã‚Œã‚‹ã€ã€å–ã‚Šé™¤ãã€ã€åå¯¾ã®å‹•ä½œã€ã‚’æ„å‘³ã™ã‚‹ã€‚ä¾‹: entkommenï¼ˆé€ƒã‚Œã‚‹ï¼‰ã€entfernenï¼ˆå–ã‚Šé™¤ãï¼‰ã€‚",
            "ver": "ver- ã¯ã€é–“é•ã„ãƒ»å¤‰åŒ–ãƒ»æ¶ˆæ»…ã€ãªã©ã‚’è¡¨ã™ã€‚ä¾‹: verlierenï¼ˆå¤±ã†ï¼‰ã€verÃ¤ndernï¼ˆå¤‰åŒ–ã•ã›ã‚‹ï¼‰ã€‚",
            "zer": "zer- ã¯ã€åˆ†è§£ãƒ»ç ´å£Šãƒ»åˆ†è£‚ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ä¾‹: zerreiÃŸenï¼ˆå¼•ãè£‚ãï¼‰ã€‚",
            "auf": "auf- ã¯ã€ä¸Šæ˜‡ãƒ»é–‹å§‹ãƒ»é–‹æ”¾ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ä¾‹: aufstehenï¼ˆèµ·ãã‚‹ï¼‰ã€aufmachenï¼ˆé–‹ã‘ã‚‹ï¼‰ã€‚",
            "an": "an- ã¯ã€æ¥è¿‘ãƒ»é–‹å§‹ãƒ»é–¢ä¸ã€ã‚’è¡¨ã™ã€‚ä¾‹: anfangenï¼ˆå§‹ã‚ã‚‹ï¼‰ã€anrufenï¼ˆé›»è©±ã™ã‚‹ï¼‰ã€‚",
            "aus": "aus- ã¯ã€å¤–ã¸ã®å‹•ããƒ»å®Œäº†ãƒ»çµæœã€ã‚’è¡¨ã™ã€‚ä¾‹: ausgehenï¼ˆå‡ºã‹ã‘ã‚‹ï¼‰ã€ausruhenï¼ˆä¼‘ã‚€ï¼‰ã€‚",
            "nach": "nach- ã¯ã€å¾Œã«ç¶šããƒ»æ¨¡å€£ãƒ»å†ç¾ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ä¾‹: nachmachenï¼ˆã¾ã­ã‚‹ï¼‰ã€nachfragenï¼ˆå•ã„åˆã‚ã›ã‚‹ï¼‰ã€‚",
            "mit": "mit- ã¯ã€å…±ã«ãƒ»ä¸€ç·’ã«ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ä¾‹: mitnehmenï¼ˆæŒã£ã¦è¡Œãï¼‰ã€mitarbeitenï¼ˆå”åŠ›ã™ã‚‹ï¼‰ã€‚",
            "unter": "unter- ã¯ã€ä¸‹ãƒ»è£œåŠ©ãƒ»ä¸è¶³ãƒ»ç§˜å¯†è£ã€ãªã©å¤šç¾©çš„ã€‚ä¾‹: unterhaltenï¼ˆæ¥½ã—ã¾ã›ã‚‹ï¼‰ã€unterschreibenï¼ˆç½²åã™ã‚‹ï¼‰ã€‚",
            "Ã¼ber": "Ã¼ber- ã¯ã€è¶Šãˆã¦ãƒ»éåº¦ãƒ»æ”¯é…ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ä¾‹: Ã¼bertreibenï¼ˆèª‡å¼µã™ã‚‹ï¼‰ã€Ã¼bernehmenï¼ˆå¼•ãå—ã‘ã‚‹ï¼‰ã€‚",
            "ab": "ab- ã¯ã€åˆ†é›¢ãƒ»é™¤å»ãƒ»é–‹å§‹ãƒ»å®Œäº†ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ä¾‹: abfahrenï¼ˆå‡ºç™ºã™ã‚‹ï¼‰ã€abnehmenï¼ˆæ¸›ã‚‹ï¼‰ã€‚",
            "er": "er- ã¯ã€çµæœãƒ»é”æˆãƒ»é–‹å§‹ãƒ»èª•ç”Ÿã€ã‚’è¡¨ã™ã€‚ä¾‹: erreichenï¼ˆåˆ°é”ã™ã‚‹ï¼‰ã€erkennenï¼ˆæ°—ã¥ãï¼‰ã€‚",
            "vor": "vor- ã¯ã€å‰ãƒ»äºˆé˜²ãƒ»å„ªå…ˆã€ã‚’è¡¨ã™ã€‚ä¾‹: vorlesenï¼ˆæœ—èª­ã™ã‚‹ï¼‰ã€vorbereitenï¼ˆæº–å‚™ã™ã‚‹ï¼‰ã€‚",
            "weg": "weg- ã¯ã€é›¢ã‚Œã‚‹ãƒ»æ¶ˆãˆã‚‹ã€ã‚’è¡¨ã™ã€‚ä¾‹: weggehenï¼ˆç«‹ã¡å»ã‚‹ï¼‰ã€wegwerfenï¼ˆæ¨ã¦ã‚‹ï¼‰ã€‚",
            "bei": "bei- ã¯ã€ãã°ã§ãƒ»é–¢ä¸ãƒ»åŠ©é•·ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ä¾‹: beistehenï¼ˆåŠ©ã‘ã‚‹ï¼‰ã€beibringenï¼ˆæ•™ãˆã‚‹ï¼‰ã€‚"
        };
        // ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æ•´å½¢ã™ã‚‹é–¢æ•°
        async function fetchData() {
            try {
                // GitHub Raw URLã‹ã‚‰é™çš„ãªJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å–å¾—ã—ã¾ã™ã€‚ï¼ˆé«˜é€Ÿï¼‰
                const response = await fetch(JSON_URL);
                if (!response.ok) {
                    throw new Error(`HTTPã‚¨ãƒ©ãƒ¼: ${response.status} - URLã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™ã‚’ç¢ºèªã—ã¦ãã ã•ã„`);
                }
                const data = await response.json(); 
                
                // JSONãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡ºãƒ»ãƒãƒƒãƒ”ãƒ³ã‚°
                allData = data.map(item => ({
                    // JSONã®ã‚­ãƒ¼ï¼ˆitem.å˜èªãªã©ï¼‰ã¯ã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®1è¡Œç›®ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã¨å®Œå…¨ã«ä¸€è‡´ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
                    word: item.å˜èª,
                    meaning: item.æ„å‘³,
                    stem: item.åŸºå¹¹,
                    prefix: item.æ¥é ­è¾,
                    englishTranslation: item.è‹±è¨³,
                    prefixMeaning: item.æ¥é ­è¾åŸºæœ¬æ„å‘³,
                    nuance: item.èªæ„Ÿ,
                    syntax: item.æ§‹æ–‡,
                    separability: item.åˆ†é›¢æ€§,
                    conjugation: item.æ´»ç”¨,
                    example1: item.ä¾‹æ–‡1,
                    japaneseTranslation1: item.æ—¥æœ¬èªè¨³1,
                    example2: item.ä¾‹æ–‡2,
                    japaneseTranslation2: item.æ—¥æœ¬èªè¨³2,
                    derivatives: item.æ´¾ç”Ÿèª,
                    correspondingEnglish: item.å¯¾å¿œè‹±å˜èª
                }));
                
                initializePage();

            } catch (error) {
                console.error("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚JSONãƒ•ã‚¡ã‚¤ãƒ«åã€ãƒ‘ã‚¹ã€ã¾ãŸã¯JSONã®æ§‹é€ ã‚’ç¢ºèªã—ã¦ãã ã•ã„:", error);
                document.getElementById('verb-details').innerHTML = `<p class="text-center text-red-600 mt-10 col-span-full">ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚JSONãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆverbs.jsonï¼‰ã®URLã€ã¾ãŸã¯å†…éƒ¨ã®æ—¥æœ¬èªã‚­ãƒ¼ï¼ˆä¾‹: item.å˜èªï¼‰ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚ï¼ˆ${error.message}ï¼‰</p>`;
            }
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆï¼ˆæ¥é ­è¾ã¨åŸºå¹¹ï¼‰ã‚’åˆæœŸåŒ–ã™ã‚‹
        // ================================
        // ãƒšãƒ¼ã‚¸åˆæœŸåŒ–
        // ================================
        function initializePage() {
            const prefixes = [...new Set(allData.map(item => item.prefix))].filter(Boolean).sort();
            const stems = [...new Set(allData.map(item => item.stem))].filter(Boolean).sort();
        
            renderPrefixList(prefixes);
            renderStemList(stems);
            renderVerbDetails(allData);
        }
        
        // ================================
        // æ¥é ­è¾ãƒªã‚¹ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        // ================================
        function renderPrefixList(prefixes) {
            const listElement = document.getElementById('prefix-list');
            listElement.innerHTML = '';
        
            const commonPrefixes = [
                "ab", "an", "auf", "aus", "be", "bei", "ent", "er", "ver", "zer",
                "nach", "mit", "Ã¼ber", "unter", "vor", "weg", "zu", "ein", "emp", "fort", "ge", "los", "um", "zurÃ¼ck"
            ];
            const frequent = prefixes.filter(p => commonPrefixes.includes(p));
            const others = prefixes.filter(p => !commonPrefixes.includes(p));
        
            // å…¨ã¦è¡¨ç¤ºãƒªãƒ³ã‚¯
            const allItem = document.createElement('li');
            allItem.classList.add('all-item');
            allItem.innerHTML = `<a href="#" data-filter-value="all" data-filter-type="prefix" class="active">å…¨ã¦ã®æ¥é ­è¾</a>`;
            allItem.querySelector('a').addEventListener('click', (e) => filterData(e, 'prefix'));
            listElement.appendChild(allItem);
        
            // ğŸ”¹ é »å‡ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ–ãƒ­ãƒƒã‚¯
            const freqSection = document.createElement('div');
            freqSection.classList.add('prefix-section', 'mb-3');
        
            const freqHeader = document.createElement('div');
            freqHeader.classList.add('flex', 'items-center', 'mb-1');
            freqHeader.innerHTML = `
                <span class="inline-block bg-blue-100 text-blue-700 font-semibold px-2 py-0.5 rounded">é »å‡º</span>
            `;
            freqSection.appendChild(freqHeader);
        
            const freqList = document.createElement('ul');
            freqList.classList.add('filter-list');
            frequent.forEach(p => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="#" data-filter-value="${p}" data-filter-type="prefix">${p}</a>`;
                li.querySelector('a').addEventListener('click', (e) => filterData(e, 'prefix'));
                freqList.appendChild(li);
            });
            freqSection.appendChild(freqList);
            listElement.appendChild(freqSection);
        
            // ğŸ”¹ ãã®ä»–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ–ãƒ­ãƒƒã‚¯
            const otherSection = document.createElement('div');
            otherSection.classList.add('prefix-section', 'mb-3');
        
            const otherHeader = document.createElement('div');
            otherHeader.classList.add('flex', 'items-center', 'mb-1');
            otherHeader.innerHTML = `
                <span class="inline-block bg-gray-100 text-gray-700 font-semibold px-2 py-0.5 rounded">ãã®ä»–</span>
            `;
            otherSection.appendChild(otherHeader);
        
            const otherList = document.createElement('ul');
            otherList.classList.add('filter-list');
            others.forEach(p => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="#" data-filter-value="${p}" data-filter-type="prefix">${p}</a>`;
                li.querySelector('a').addEventListener('click', (e) => filterData(e, 'prefix'));
                otherList.appendChild(li);
            });
            otherSection.appendChild(otherList);
            listElement.appendChild(otherSection);
        }

        
        // ================================
        // åŸºå¹¹ãƒªã‚¹ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        // ================================
        function renderStemList(stems) {
            const listElement = document.getElementById('stem-list');
            listElement.innerHTML = '';
        
            // å…¨ã¦è¡¨ç¤ºãƒªãƒ³ã‚¯
            const allItem = document.createElement('li');
            allItem.classList.add('all-item');
            allItem.innerHTML = `<a href="#" data-filter-value="all" data-filter-type="stem" class="active">å…¨ã¦ã®åŸºå¹¹</a>`;
            allItem.querySelector('a').addEventListener('click', (e) => filterData(e, 'stem'));
            listElement.appendChild(allItem);
        
            // é ­æ–‡å­—ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
            const grouped = {};
            stems.forEach(stem => {
                const first = stem[0].toUpperCase();
                if (!grouped[first]) grouped[first] = [];
                grouped[first].push(stem);
            });
        
            const sortedLetters = Object.keys(grouped).sort();
        
            // è¦‹å‡ºã—ã”ã¨ã«ç‹¬ç«‹ã—ãŸãƒ–ãƒ­ãƒƒã‚¯ã‚’ç”Ÿæˆ
            sortedLetters.forEach(letter => {
                const section = document.createElement('div');
                section.classList.add('stem-section', 'mb-3');
        
                const header = document.createElement('div');
                header.classList.add('flex', 'items-center', 'mb-1');
                header.innerHTML = `
                    <span class="inline-block bg-blue-100 text-blue-700 font-semibold px-2 py-0.5 rounded">${letter}</span>
                `;
                section.appendChild(header);
        
                const innerList = document.createElement('ul');
                innerList.classList.add('filter-list');
                grouped[letter].forEach(stem => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a href="#" data-filter-value="${stem}" data-filter-type="stem">${stem}</a>`;
                    li.querySelector('a').addEventListener('click', (e) => filterData(e, 'stem'));
                    innerList.appendChild(li);
                });
                section.appendChild(innerList);
                listElement.appendChild(section);
            });
        }



        // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã—ã€çµæœã‚’ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«è¡¨ç¤ºã™ã‚‹
        function filterData(e, type) {
            e.preventDefault(); 
            const filterValue = e.target.getAttribute('data-filter-value');
            const descElement = document.getElementById('prefix-description');
            const headingElement = document.getElementById('main-content').querySelector('h2');
            let filteredData;
        
            if (filterValue === 'all') {
                filteredData = allData;
                headingElement.textContent = `å˜èªä¸€è¦§ï¼ˆ${type === 'prefix' ? 'æ¥é ­è¾' : 'åŸºå¹¹'}ï¼šå…¨ã¦ï¼‰`;
                descElement.textContent = ""; // èª¬æ˜ã‚’ã‚¯ãƒªã‚¢
            } else if (type === 'prefix') {
                filteredData = allData.filter(item => item.prefix && item.prefix === filterValue);
                headingElement.textContent = `å˜èªä¸€è¦§ï¼ˆæ¥é ­è¾ï¼š${filterValue}ï¼‰`;
                // æ¥é ­è¾ã®èª¬æ˜ã‚’è¡¨ç¤º
                descElement.textContent = prefixExplanations[filterValue] || "";
            } else if (type === 'stem') {
                filteredData = allData.filter(item => item.stem && item.stem === filterValue);
                headingElement.textContent = `å˜èªä¸€è¦§ï¼ˆåŸºå¹¹ï¼š${filterValue}ï¼‰`;
                descElement.textContent = ""; // æ¥é ­è¾èª¬æ˜ã¯éè¡¨ç¤º
            }
        
            renderVerbDetails(filteredData);
        
            document.querySelectorAll('.filter-list a').forEach(a => a.classList.remove('active'));
            e.target.classList.add('active');
        }


        // å‹•è©ã®è©³ç´°ãƒªã‚¹ãƒˆã‚’HTMLã«æç”»ã™ã‚‹ (ãƒ‡ã‚¶ã‚¤ãƒ³åæ˜ æ¸ˆã¿)
        function renderVerbDetails(data) {
            const detailsElement = document.getElementById('verb-details');
            detailsElement.innerHTML = ''; 
            
            if (data.length === 0) {
                detailsElement.innerHTML = '<p class="text-center text-gray-500 mt-10 col-span-full">è©²å½“ã™ã‚‹å˜èªã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>';
                return;
            }

            data.forEach(item => {
                const verbCard = document.createElement('div');
                verbCard.classList.add('verb-card');
                
                // ä¾‹æ–‡ 2 ã® HTML ã‚’å®‰å…¨ã«ç”Ÿæˆ
                let example2Html = '';
                if (item.example2 && String(item.example2).trim().length > 0) {
                    example2Html = `
                        <div class="example-box">
                            <div class="vertical-line"></div>
                            <div class="example-content">
                                <p class="german-sentence">${item.example2}</p>
                                <p class="japanese-translation">ï¼ˆ${item.japaneseTranslation2 || '---'}ï¼‰</p>
                            </div>
                        </div>
                    `;
                }
                
                // æ´¾ç”Ÿèªã¨å¯¾å¿œè‹±å˜èªã®HTMLã‚’ç”Ÿæˆ
                const relatedHtml = `
                    <div class="related-section">
                        ${(item.derivatives && String(item.derivatives).trim().length > 0) ? `
                            <div class="related-item">
                                <span class="icon">ğŸ”—</span>
                                <span class="detail-label">æ´¾ç”Ÿèª:</span>
                                <span class="german-term">${item.derivatives}</span>
                            </div>
                        ` : ''}
                        
                        ${(item.correspondingEnglish && String(item.correspondingEnglish).trim().length > 0) ? `
                            <div class="related-item">
                                <span class="icon">ğŸ‡¬ğŸ‡§</span>
                                <span class="detail-label">é¡ä¼¼è‹±å˜èª:</span>
                                <span class="highlight-detail">${item.correspondingEnglish}</span>
                            </div>
                        ` : ''}
                    </div>
                `;

                // å…¨ã¦ã®é …ç›®ã‚’æ–°ã—ã„ãƒ‡ã‚¶ã‚¤ãƒ³æ§‹é€ ã«åŸ‹ã‚è¾¼ã‚€
                verbCard.innerHTML = `
                    <div class="card-header">
                        <h3>${item.word}</h3>
                        <div class="etymology">${item.prefix || '---'} + ${item.stem || '---'}</div>
                    </div>

                    <div class="meaning-jp">${item.meaning}</div>
                    <div class="meaning-en">(${item.englishTranslation || '---'})</div>

                    <div class="detail-section">
                        <div class="detail-item">
                            <span class="detail-label">æ§‹æˆ:</span>
                            <span class="detail-value highlight-detail">
                                ${item.prefix || '---'}
                                ${(item.prefixMeaning && String(item.prefixMeaning).trim().length > 0) 
                                    ? `ï¼ˆ${item.prefixMeaning}ï¼‰` 
                                    : ''
                                }
                                + ${item.stem || '---'}
                            </span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">åˆ†é›¢æ€§:</span>
                            <span class="detail-value">${item.separability || '---'}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">èªæ„Ÿ:</span>
                            <span class="detail-value">${item.nuance || '---'}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">æ§‹æ–‡:</span>
                            <span class="detail-value"><span class="german-term">${item.syntax || '---'}</span></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">æ´»ç”¨:</span>
                            <span class="detail-value"><span class="german-term">${item.conjugation || '---'}</span></span>
                        </div>
                    </div>

                    <div class="example-section">
                        <h4 class="text-lg font-medium mb-3 text-gray-700">ä¾‹æ–‡</h4>
                        <div class="example-box">
                            <div class="vertical-line"></div>
                            <div class="example-content">
                                <p class="german-sentence">${item.example1 || '---'}</p>
                                <p class="japanese-translation">ï¼ˆ${item.japaneseTranslation1 || '---'}ï¼‰</p>
                            </div>
                        </div>
                        ${example2Html}
                    </div>
                    
                    ${relatedHtml}
                `;
                detailsElement.appendChild(verbCard);
            });
        }

        // ãƒšãƒ¼ã‚¸ã®ãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’é–‹å§‹
        fetchData();
    </script>
</body>
</html>
